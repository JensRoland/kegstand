"""Main entry point for the Kegstand CLI."""

import contextlib
import os
import subprocess  # nosec
from operator import itemgetter
from pathlib import Path

import click

from kegstandcli import __version__
from kegstandcli.cli.build import build
from kegstandcli.cli.config import find_config_file, get_kegstand_config
from kegstandcli.cli.deploy import deploy
from kegstandcli.cli.new import new
from kegstandcli.cli.teardown import teardown

ALIASES = {"init": new, "up": deploy, "party": deploy, "down": teardown}


class AliasedGroup(click.Group):
    """Click group that supports command aliases."""

    def get_command(self, ctx: click.Context, cmd_name: str) -> click.Command | None:
        """Get command by name or alias.

        Args:
            ctx: Click context
            cmd_name: Command name or alias

        Returns:
            Command if found, None otherwise
        """
        with contextlib.suppress(KeyError):
            cmd_name = ALIASES[cmd_name].name  # type: ignore
        return super().get_command(ctx, cmd_name)


@click.group(cls=AliasedGroup)
@click.option("--config", "config_file", help="Path to Kegstand configuration file.")
@click.option("--verbose", is_flag=True, default=False, help="Show verbose output")
@click.pass_context
def kegstandcli(
    ctx: click.Context, config_file: str | None, verbose: bool
) -> None:  # ANSI art generated with https://dom111.github.io/image-to-ansi/
    """\b
    \033[49m                        \033[38;5;232;48;5;52m▄\033[38;5;234;48;5;52m▄\033[38;5;232;49m▄▄▄\033[38;5;236;48;5;52m▄\033[38;5;245;48;5;233m▄\033[38;5;252;48;5;232m▄\033[38;5;230;48;5;233m▄\033[38;5;230;48;5;234m▄\033[38;5;230;48;5;233m▄\033[38;5;253;48;5;232m▄\033[38;5;248;48;5;232m▄\033[38;5;59;48;5;52m▄\033[38;5;233;49m▄\033[38;5;232;49m▄\033[49m     \033[38;5;52;49m▄\033[49m       \033[m
    \033[49m                        \033[49;38;5;52m▀\033[38;5;52;48;5;236m▄\033[38;5;237;48;5;188m▄\033[38;5;254;48;5;252m▄\033[38;5;230;48;5;253m▄\033[38;5;230;48;5;230m▄\033[38;5;222;48;5;223m▄\033[38;5;222;48;5;222m▄▄▄▄▄▄\033[38;5;222;48;5;229m▄\033[38;5;222;48;5;253m▄\033[38;5;229;48;5;242m▄\033[38;5;249;48;5;232m▄\033[38;5;234;48;5;52m▄\033[38;5;52;49m▄\033[49m  \033[38;5;52;48;5;233m▄\033[38;5;239;48;5;232m▄\033[38;5;234;48;5;52m▄\033[38;5;52;49m▄\033[49m    \033[m
    \033[49m                        \033[38;5;52;49m▄\033[38;5;232;49m▄\033[38;5;240;48;5;52m▄\033[38;5;144;48;5;236m▄\033[38;5;101;48;5;186m▄\033[38;5;180;48;5;222m▄\033[38;5;222;48;5;222m▄▄▄▄▄▄\033[48;5;222m \033[38;5;222;48;5;222m▄▄▄▄\033[38;5;222;48;5;252m▄\033[38;5;187;48;5;235m▄\033[38;5;235;48;5;52m▄\033[38;5;52;49m▄\033[38;5;236;48;5;233m▄\033[38;5;254;48;5;102m▄\033[38;5;221;48;5;143m▄\033[38;5;237;48;5;232m▄\033[38;5;52;49m▄\033[49m   \033[m
    \033[49m                       \033[38;5;233;48;5;52m▄\033[38;5;250;48;5;234m▄\033[38;5;222;48;5;249m▄\033[38;5;185;48;5;229m▄\033[38;5;221;48;5;221m▄\033[38;5;179;48;5;221m▄\033[38;5;179;48;5;137m▄\033[38;5;137;48;5;180m▄\033[38;5;143;48;5;222m▄\033[38;5;222;48;5;222m▄▄▄\033[48;5;222m \033[38;5;222;48;5;222m▄▄▄▄▄▄▄\033[38;5;249;48;5;144m▄\033[38;5;230;48;5;238m▄\033[38;5;222;48;5;253m▄\033[38;5;222;48;5;222m▄\033[38;5;179;48;5;221m▄\033[38;5;137;48;5;95m▄\033[38;5;232;48;5;233m▄\033[49m   \033[m
    \033[49m                      \033[38;5;234;48;5;233m▄\033[38;5;187;48;5;243m▄\033[38;5;221;48;5;222m▄\033[38;5;221;48;5;215m▄\033[38;5;221;48;5;179m▄\033[38;5;222;48;5;179m▄▄\033[38;5;179;48;5;137m▄\033[38;5;101;48;5;143m▄\033[38;5;143;48;5;101m▄\033[38;5;180;48;5;101m▄\033[38;5;101;48;5;222m▄\033[38;5;222;48;5;222m▄▄▄\033[38;5;179;48;5;186m▄\033[38;5;186;48;5;222m▄\033[38;5;222;48;5;222m▄▄▄▄▄▄▄\033[38;5;221;48;5;222m▄\033[38;5;143;48;5;179m▄\033[38;5;101;48;5;137m▄\033[38;5;232;48;5;232m▄\033[49m   \033[m
    \033[49m                     \033[38;5;232;48;5;52m▄\033[38;5;250;48;5;242m▄\033[38;5;221;48;5;221m▄\033[38;5;222;48;5;221m▄\033[38;5;222;48;5;222m▄▄▄\033[38;5;137;48;5;221m▄\033[38;5;223;48;5;101m▄\033[38;5;223;48;5;223m▄\033[38;5;223;48;5;222m▄\033[38;5;222;48;5;222m▄\033[38;5;222;48;5;216m▄\033[38;5;222;48;5;101m▄\033[38;5;95;48;5;186m▄\033[38;5;137;48;5;222m▄\033[38;5;222;48;5;222m▄\033[38;5;222;48;5;179m▄\033[38;5;179;48;5;186m▄\033[38;5;180;48;5;222m▄\033[38;5;222;48;5;222m▄▄▄\033[38;5;221;48;5;222m▄\033[38;5;143;48;5;221m▄\033[38;5;179;48;5;137m▄\033[38;5;179;48;5;221m▄\033[38;5;143;48;5;95m▄\033[38;5;236;48;5;233m▄\033[49m   \033[m
    \033[49m                    \033[38;5;52;49m▄\033[38;5;235;48;5;235m▄\033[38;5;235;48;5;179m▄\033[38;5;221;48;5;179m▄\033[38;5;222;48;5;222m▄▄▄▄\033[38;5;246;48;5;101m▄\033[38;5;138;48;5;223m▄\033[38;5;223;48;5;223m▄▄▄▄\033[38;5;180;48;5;222m▄\033[38;5;144;48;5;137m▄\033[38;5;95;48;5;180m▄\033[38;5;238;48;5;95m▄\033[38;5;234;48;5;137m▄\033[38;5;240;48;5;221m▄\033[38;5;137;48;5;221m▄\033[38;5;137;48;5;179m▄\033[38;5;179;48;5;221m▄\033[38;5;221;48;5;179m▄▄\033[38;5;179;48;5;179m▄\033[38;5;101;48;5;215m▄\033[38;5;179;48;5;101m▄\033[38;5;221;48;5;221m▄\033[38;5;236;48;5;237m▄\033[38;5;52;48;5;233m▄\033[49m  \033[m
    \033[49m                    \033[49;38;5;52m▀\033[38;5;52;48;5;232m▄\033[38;5;232;48;5;234m▄\033[38;5;179;48;5;221m▄\033[38;5;222;48;5;222m▄\033[38;5;221;48;5;222m▄\033[38;5;222;48;5;222m▄\033[38;5;236;48;5;222m▄\033[38;5;235;48;5;144m▄\033[38;5;238;48;5;223m▄\033[38;5;238;48;5;144m▄\033[38;5;223;48;5;223m▄▄\033[38;5;144;48;5;138m▄\033[38;5;181;48;5;238m▄\033[38;5;188;48;5;102m▄\033[38;5;242;48;5;242m▄\033[38;5;239;48;5;235m▄\033[38;5;95;48;5;59m▄\033[38;5;221;48;5;221m▄▄\033[38;5;179;48;5;179m▄\033[38;5;221;48;5;137m▄▄\033[38;5;179;48;5;101m▄\033[38;5;143;48;5;95m▄\033[38;5;179;48;5;179m▄\033[38;5;221;48;5;221m▄\033[38;5;137;48;5;179m▄\033[38;5;232;48;5;233m▄\033[49m   \033[m
    \033[49m                      \033[49;38;5;52m▀\033[38;5;233;48;5;237m▄\033[38;5;95;48;5;222m▄\033[38;5;222;48;5;179m▄\033[38;5;179;48;5;179m▄\033[38;5;179;48;5;221m▄\033[38;5;137;48;5;137m▄\033[38;5;243;48;5;102m▄\033[38;5;243;48;5;238m▄\033[38;5;180;48;5;223m▄\033[38;5;223;48;5;223m▄\033[48;5;223m \033[38;5;223;48;5;223m▄\033[38;5;255;48;5;251m▄\033[38;5;181;48;5;242m▄\033[38;5;180;48;5;242m▄\033[38;5;137;48;5;137m▄\033[38;5;221;48;5;221m▄\033[38;5;137;48;5;221m▄\033[38;5;179;48;5;137m▄\033[38;5;179;48;5;221m▄\033[38;5;238;48;5;221m▄\033[38;5;245;48;5;101m▄\033[38;5;223;48;5;187m▄\033[38;5;223;48;5;138m▄\033[38;5;180;48;5;137m▄\033[38;5;234;48;5;235m▄\033[49;38;5;52m▀\033[49m   \033[m
    \033[49m                        \033[38;5;232;48;5;233m▄\033[38;5;221;48;5;222m▄\033[38;5;222;48;5;222m▄\033[38;5;101;48;5;143m▄\033[38;5;223;48;5;181m▄\033[38;5;223;48;5;223m▄▄\033[38;5;181;48;5;144m▄\033[38;5;247;48;5;223m▄\033[38;5;246;48;5;223m▄\033[38;5;223;48;5;223m▄▄\033[38;5;181;48;5;187m▄\033[38;5;180;48;5;95m▄\033[38;5;180;48;5;137m▄\033[38;5;137;48;5;101m▄\033[38;5;95;48;5;179m▄\033[38;5;131;48;5;179m▄\033[38;5;101;48;5;236m▄\033[38;5;187;48;5;59m▄\033[38;5;240;48;5;101m▄\033[38;5;237;48;5;144m▄\033[38;5;101;48;5;223m▄\033[38;5;241;48;5;223m▄\033[38;5;243;48;5;138m▄\033[38;5;234;48;5;233m▄\033[49m   \033[m
    \033[49m                       \033[38;5;232;48;5;52m▄\033[38;5;232;48;5;237m▄\033[38;5;232;48;5;101m▄\033[38;5;232;48;5;235m▄\033[38;5;235;48;5;233m▄\033[38;5;239;48;5;144m▄\033[38;5;234;48;5;223m▄\033[38;5;180;48;5;223m▄\033[38;5;138;48;5;245m▄\033[38;5;132;48;5;248m▄\033[38;5;132;48;5;240m▄\033[38;5;223;48;5;223m▄▄▄\033[38;5;222;48;5;223m▄\033[38;5;137;48;5;216m▄\033[38;5;131;48;5;89m▄\033[38;5;167;48;5;167m▄▄\033[38;5;236;48;5;95m▄\033[38;5;137;48;5;180m▄\033[38;5;221;48;5;95m▄\033[38;5;179;48;5;234m▄\033[38;5;95;48;5;233m▄\033[38;5;236;48;5;233m▄\033[38;5;234;48;5;233m▄\033[38;5;233;48;5;234m▄\033[38;5;232;48;5;233m▄\033[49m  \033[m
    \033[49m                    \033[38;5;233;49m▄\033[38;5;235;48;5;52m▄\033[38;5;8;48;5;232m▄\033[38;5;246;48;5;233m▄\033[38;5;102;48;5;233m▄\033[38;5;102;48;5;232m▄\033[38;5;245;48;5;232m▄\033[38;5;240;48;5;243m▄\033[38;5;235;48;5;236m▄\033[38;5;232;48;5;234m▄\033[38;5;234;48;5;237m▄\033[38;5;236;48;5;180m▄\033[38;5;236;48;5;132m▄\033[38;5;239;48;5;138m▄\033[38;5;101;48;5;187m▄\033[38;5;137;48;5;180m▄\033[38;5;239;48;5;101m▄\033[38;5;1;48;5;238m▄\033[38;5;89;48;5;235m▄\033[38;5;167;48;5;167m▄▄\033[38;5;125;48;5;167m▄\033[38;5;233;48;5;234m▄\033[38;5;179;48;5;179m▄\033[38;5;221;48;5;221m▄▄▄\033[38;5;179;48;5;221m▄\033[38;5;238;48;5;179m▄\033[38;5;232;48;5;234m▄\033[49m   \033[m
    \033[49m                   \033[38;5;233;49m▄\033[38;5;59;48;5;233m▄\033[38;5;247;48;5;102m▄\033[38;5;168;48;5;248m▄\033[38;5;167;48;5;174m▄\033[38;5;167;48;5;175m▄\033[38;5;167;48;5;102m▄\033[38;5;174;48;5;239m▄\033[38;5;239;48;5;239m▄\033[38;5;233;48;5;233m▄\033[38;5;232;48;5;232m▄\033[38;5;233;48;5;52m▄\033[38;5;234;48;5;125m▄\033[38;5;180;48;5;137m▄\033[38;5;223;48;5;222m▄▄\033[38;5;138;48;5;222m▄\033[38;5;235;48;5;239m▄\033[38;5;234;48;5;1m▄\033[38;5;125;48;5;125m▄\033[38;5;52;48;5;125m▄\033[38;5;233;48;5;125m▄▄\033[38;5;233;48;5;233m▄\033[38;5;58;48;5;179m▄\033[38;5;179;48;5;221m▄\033[38;5;179;48;5;137m▄\033[38;5;237;48;5;137m▄\033[38;5;233;48;5;101m▄\033[38;5;232;48;5;233m▄\033[49m    \033[m
    \033[49m                  \033[38;5;232;48;5;52m▄\033[38;5;241;48;5;235m▄\033[38;5;174;48;5;246m▄\033[38;5;174;48;5;168m▄\033[38;5;251;48;5;174m▄\033[38;5;174;48;5;167m▄\033[38;5;175;48;5;167m▄\033[38;5;167;48;5;167m▄▄\033[38;5;125;48;5;131m▄\033[38;5;52;48;5;232m▄\033[38;5;0;48;5;232m▄\033[38;5;232;48;5;233m▄\033[38;5;236;48;5;236m▄▄\033[38;5;236;48;5;239m▄\033[38;5;236;48;5;236m▄▄▄\033[38;5;233;48;5;234m▄\033[38;5;233;48;5;52m▄\033[49;38;5;232m▀\033[49;38;5;233m▀\033[49m  \033[38;5;232;48;5;236m▄\033[38;5;237;48;5;137m▄\033[38;5;239;48;5;95m▄\033[38;5;52;48;5;233m▄\033[49m      \033[m
    \033[49m                 \033[38;5;233;48;5;233m▄\033[38;5;145;48;5;239m▄\033[38;5;238;48;5;8m▄\033[38;5;95;48;5;167m▄\033[38;5;167;48;5;175m▄\033[38;5;167;48;5;224m▄\033[38;5;174;48;5;15m▄\033[38;5;254;48;5;188m▄\033[38;5;255;48;5;167m▄\033[38;5;131;48;5;125m▄\033[38;5;125;48;5;125m▄\033[38;5;232;48;5;52m▄\033[38;5;232;48;5;232m▄▄\033[38;5;233;48;5;233m▄\033[38;5;236;48;5;236m▄▄▄\033[38;5;236;48;5;235m▄\033[38;5;235;48;5;234m▄\033[38;5;232;48;5;232m▄\033[49m     \033[38;5;233;48;5;52m▄\033[38;5;232;48;5;235m▄\033[38;5;232;48;5;234m▄\033[49m       \033[m
    \033[49m               \033[38;5;52;49m▄\033[38;5;235;48;5;233m▄\033[38;5;248;48;5;243m▄\033[38;5;239;48;5;242m▄\033[38;5;245;48;5;8m▄\033[38;5;238;48;5;239m▄\033[38;5;237;48;5;237m▄\033[38;5;235;48;5;131m▄\033[38;5;1;48;5;125m▄\033[38;5;125;48;5;125m▄\033[38;5;125;48;5;174m▄\033[38;5;52;48;5;125m▄\033[38;5;0;48;5;233m▄\033[38;5;239;48;5;232m▄\033[38;5;175;48;5;233m▄\033[38;5;167;48;5;242m▄\033[38;5;167;48;5;138m▄\033[38;5;167;48;5;89m▄\033[38;5;167;48;5;236m▄▄▄▄\033[38;5;131;48;5;233m▄\033[38;5;236;48;5;232m▄\033[38;5;233;49m▄▄\033[49m  \033[49;38;5;52m▀\033[49;38;5;232m▀\033[49m        \033[m
    \033[49m               \033[38;5;232;48;5;233m▄\033[38;5;238;48;5;245m▄\033[38;5;235;48;5;239m▄\033[38;5;237;48;5;240m▄\033[38;5;238;48;5;238m▄▄\033[38;5;236;48;5;237m▄\033[38;5;234;48;5;235m▄\033[38;5;234;48;5;234m▄\033[38;5;232;48;5;233m▄\033[38;5;0;48;5;232m▄\033[38;5;239;48;5;0m▄\033[38;5;174;48;5;242m▄\033[38;5;167;48;5;174m▄\033[48;5;167m \033[38;5;167;48;5;167m▄\033[48;5;167m   \033[38;5;167;48;5;167m▄▄▄\033[48;5;167m \033[38;5;167;48;5;167m▄\033[38;5;167;48;5;131m▄\033[38;5;167;48;5;52m▄\033[38;5;131;48;5;232m▄\033[38;5;232;48;5;233m▄\033[38;5;233;49m▄\033[49m         \033[m
    \033[49m               \033[49;38;5;52m▀\033[38;5;233;48;5;232m▄\033[38;5;232;48;5;232m▄\033[38;5;233;48;5;232m▄\033[38;5;233;48;5;234m▄\033[38;5;232;48;5;237m▄\033[38;5;234;48;5;234m▄▄\033[38;5;0;48;5;233m▄\033[38;5;0;48;5;0m▄\033[38;5;232;48;5;0m▄\033[38;5;232;48;5;243m▄\033[38;5;235;48;5;167m▄\033[38;5;89;48;5;167m▄\033[38;5;167;48;5;167m▄▄▄\033[48;5;167m \033[38;5;167;48;5;167m▄▄▄▄▄▄\033[38;5;89;48;5;167m▄\033[38;5;233;48;5;131m▄\033[38;5;232;48;5;233m▄\033[49;38;5;232m▀\033[49m          \033[m
    \033[49m                 \033[49;38;5;233m▀\033[38;5;52;48;5;232m▄\033[38;5;232;48;5;232m▄\033[38;5;0;48;5;0m▄▄\033[38;5;0;48;5;232m▄\033[38;5;0;48;5;0m▄\033[38;5;232;48;5;232m▄\033[49;38;5;52m▀\033[49;38;5;233m▀\033[38;5;232;48;5;232m▄\033[38;5;234;48;5;234m▄\033[38;5;234;48;5;235m▄\033[38;5;234;48;5;131m▄\033[38;5;125;48;5;167m▄\033[38;5;167;48;5;167m▄▄▄▄\033[38;5;89;48;5;167m▄\033[38;5;234;48;5;131m▄\033[38;5;233;48;5;235m▄\033[38;5;233;48;5;233m▄\033[49;38;5;232m▀\033[49m            \033[m
    \033[49m                    \033[49;38;5;233m▀\033[49;38;5;232m▀▀▀\033[49m  \033[38;5;52;49m▄\033[38;5;239;48;5;232m▄\033[38;5;239;48;5;234m▄\033[38;5;234;48;5;234m▄▄\033[38;5;232;48;5;233m▄\033[38;5;233;48;5;234m▄\033[38;5;233;48;5;236m▄▄\033[38;5;52;48;5;234m▄\033[38;5;237;48;5;233m▄\033[38;5;187;48;5;234m▄\033[38;5;101;48;5;233m▄\033[38;5;233;48;5;233m▄\033[49m             \033[m
    \033[49m                          \033[38;5;233;48;5;52m▄\033[38;5;8;48;5;242m▄\033[38;5;223;48;5;223m▄\033[38;5;222;48;5;144m▄\033[38;5;239;48;5;240m▄\033[38;5;233;48;5;232m▄\033[49m    \033[38;5;52;48;5;233m▄\033[38;5;237;48;5;101m▄\033[38;5;236;48;5;95m▄\033[38;5;233;48;5;233m▄\033[38;5;233;49m▄\033[49m            \033[m
    \033[49m                          \033[38;5;232;48;5;233m▄\033[38;5;249;48;5;247m▄\033[38;5;223;48;5;223m▄\033[38;5;137;48;5;216m▄\033[38;5;232;48;5;233m▄\033[49m      \033[38;5;233;48;5;237m▄\033[38;5;234;48;5;238m▄\033[38;5;232;48;5;234m▄\033[49;38;5;233m▀\033[49m            \033[m
    \033[49m                         \033[38;5;232;48;5;52m▄\033[38;5;245;48;5;239m▄\033[38;5;236;48;5;236m▄\033[38;5;235;48;5;238m▄\033[38;5;232;48;5;235m▄\033[38;5;52;48;5;52m▄\033[49m                      \033[m
    \033[49m                         \033[38;5;233;48;5;233m▄\033[38;5;8;48;5;138m▄\033[38;5;235;48;5;236m▄\033[38;5;233;48;5;234m▄\033[38;5;232;48;5;232m▄\033[49m                       \033[m
    \033[38;5;167m██   ██ ███████  ██████  ███████ ████████  █████  ███    ██ ██████
    ██  ██  ██      ██       ██         ██    ██   ██ ████   ██ ██   ██
    █████   █████   ██   ███ ███████    ██    ███████ ██ ██  ██ ██   ██
    ██  ██  ██      ██    ██      ██    ██    ██   ██ ██  ██ ██ ██   ██
    ██   ██ ███████  ██████  ███████    ██    ██   ██ ██   ████ ██████
    ===================================================================
    The Developer's Toolbelt For Accelerating Mean-Time-To-Party on AWS\033[m"""  # noqa: E501

    config_file_absolute, config_file_name = find_config_file(verbose, config_file)
    project_dir = str(Path(config_file_absolute).parent) if config_file_absolute else os.getcwd()

    if verbose:
        click.echo(f"CLI version: {__version__}")
        click.echo(f"Project root: {os.path.abspath(project_dir)}")
        click.echo("-" * 80)

    config = (
        get_kegstand_config(verbose, project_dir, config_file_name) if config_file_name else None
    )

    ctx.obj = {
        "config": config,
        "config_file": config_file_absolute,
        "project_dir": project_dir,
        "verbose": verbose,
    }


for command in [new, build, deploy, teardown]:
    kegstandcli.add_command(command)


@kegstandcli.command()
@click.pass_context
@click.argument("endpoint_name", type=str, required=True)
def test_api_endpoint(ctx: click.Context, endpoint_name: str) -> None:
    """Send a request to a deployed public API endpoint."""
    project_dir, config_file, config, verbose = itemgetter(
        "project_dir", "config_file", "config", "verbose"
    )(ctx.obj)
    if config is None:
        click.Abort("Config file not found.")

    stack_name = config["project"]["name"]
    stack_output_key = f"{endpoint_name}Url"

    command = [
        "aws",
        "cloudformation",
        "describe-stacks",
        "--stack-name",
        stack_name,
        "--query",
        f"Stacks[0].Outputs[?OutputKey=='{stack_output_key}'].OutputValue",
        "--output",
        "text",
        "--no-cli-pager",
    ]

    if verbose:
        click.echo(f"Running command: {' '.join(command)}")

    try:
        endpoint_url = subprocess.check_output(command, text=True).strip()  # noqa: S603
    except subprocess.CalledProcessError as e:
        raise click.ClickException(f"Failed to retrieve output from deployed stack: {e}") from e

    click.echo(f"Found endpoint URL: {endpoint_url}, sending a GET request...")

    command = ["curl", "-sSX", "GET", endpoint_url, "--fail"]

    if verbose:
        click.echo(f"Running command: {' '.join(command)}")

    try:
        response = subprocess.check_output(command, text=True)  # noqa: S603
        click.echo(response)
    except subprocess.CalledProcessError as e:
        raise click.ClickException(f"Failed to connect to endpoint: {e}") from e


if __name__ == "__main__":
    kegstandcli(obj={})  # pylint: disable=no-value-for-parameter
